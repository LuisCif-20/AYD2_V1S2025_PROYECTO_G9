<p-dialog
  [(visible)]="visible"
  [modal]="true"
  header="Nuevo Producto"
  [closable]="true"
  [style]="{ width: '700px' }"
  styleClass="custom-dialog"
  (onHide)="cerrado.emit(true)"
>
  <ng-template pTemplate="content">
    <div class="p-fluid">
      <!-- Código -->
      <div class="mb-4">
        <label for="codigo" class="block font-bold mb-2">Código del Producto *</label>
        <input
          id="codigo"
          pInputText
          maxlength="8"
          placeholder="Ej: PRD00001"
          [(ngModel)]="product.code"
          class="w-full"
          pattern="^[A-Za-z]{4}[0-9]{4}$"
        />
      </div>

      <!-- Nombre -->
      <div class="mb-4">
        <label for="nombre" class="block font-bold mb-2">Nombre *</label>
        <input
          id="nombre"
          pInputText
          placeholder="Ej: Shampoo Herbal"
          [(ngModel)]="product.name"
          class="w-full"
        />
      </div>

      <!-- Grid de 2 columnas -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
        <!-- Presentación -->
        <div>
          <label for="presentacion" class="block font-bold mb-2">Presentación *</label>
          <p-dropdown
            id="presentacion"
            [options]="presentaciones"
            [(ngModel)]="product.presentation"
            optionLabel="name"
            [filter]="true"
            placeholder="Seleccione una presentación"
            class="w-full"
          ></p-dropdown>
        </div>

        <!-- Unidades por presentación -->
        <div>
          <label for="unidades" class="block font-bold mb-2">Unidades por Presentación *</label>
          <p-inputNumber
            id="unidades"
            [min]="1"
            [max]="9999"
            [(ngModel)]="product.unitsPerPresentation"
            class="w-full"
          ></p-inputNumber>
        </div>

        <!-- Precio por presentación -->
        <div>
          <label for="precio" class="block font-bold mb-2">Precio por Presentación *</label>
          <p-inputNumber
            id="precio"
            mode="currency"
            currency="GTQ"
            locale="es-GT"
            [min]="0"
            [step]="0.01"
            [(ngModel)]="product.pricePerPresentation"
            class="w-full"
          ></p-inputNumber>
        </div>
      </div>
    </div>
  </ng-template>

  <!-- Footer -->
  <ng-template pTemplate="footer">
    <div class="flex justify-end gap-2">
      <p-button
        label="Cancelar"
        icon="pi pi-times"
        severity="secondary"
        (onClick)="hideDialog()"
      ></p-button>
      <p-button
        label="Guardar Producto"
        icon="pi pi-save"
        (onClick)="guardar()"
      ></p-button>
    </div>
  </ng-template>
</p-dialog>

<p-toast></p-toast>
